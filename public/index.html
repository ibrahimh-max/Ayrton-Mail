<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Email Web App</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Blockchain-specific styles */
    #blockchainDashboard {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .health-metrics {
      display: flex;
      justify-content: space-around;
      text-align: center;
    }
    
    .metric {
      padding: 0 15px;
    }
    
    .metric-value {
      font-size: 1.8em;
      font-weight: bold;
      display: block;
    }
    
    .metric-label {
      color: #666;
      font-size: 0.9em;
    }
    
    #viewChainBtn {
      background: #764ba2;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      margin: 10px 0;
      cursor: pointer;
      font-size: 16px;
    }
    
    #viewChainBtn:hover {
      background: #5d3a8a;
    }
    
    #chain-display {
      margin-top: 20px;
    }
    
    .blocks {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 15px;
    }
    
    .block {
      background: white;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .block h4 {
      margin-bottom: 10px;
      color: #333;
    }
    
    .hash {
      font-family: monospace;
      color: #666;
      font-size: 0.9em;
      word-break: break-all;
    }
    
    #chain-status.valid {
      color: #2ecc71;
    }
    
    #chain-status.invalid {
      color: #e74c3c;
    }
  </style>
</head>
<body>
  <!-- Navigation Bar (shown after login) -->
  <nav id="navBar" style="display: none;">
    <button onclick="logout()">Logout</button>
  </nav>

  <!-- Auth Container (shown by default) -->
  <div id="authContainer" class="container">
    <!-- Login Form -->
    <div id="loginForm">
      <h2>Login</h2>
      <div class="form-group">
        <label for="loginEmail">Email</label>
        <input type="email" id="loginEmail" placeholder="Enter email" required>
      </div>
      <div class="form-group">
        <label for="loginPassword">Password</label>
        <input type="password" id="loginPassword" placeholder="Enter password" required>
      </div>
      <button onclick="login()">Login</button>
      <p class="error" id="loginError" style="display: none;">Invalid email or password</p>
      <p class="toggle" onclick="showSignup()">Don't have an account? <span>Sign up</span></p>
    </div>

    <!-- Signup Form -->
    <div id="signupForm" style="display: none;">
      <h2>Sign Up</h2>
      <div class="form-group">
        <label for="signupEmail">Email</label>
        <input type="email" id="signupEmail" placeholder="Enter email" required>
      </div>
      <div class="form-group">
        <label for="signupPassword">Password</label>
        <input type="password" id="signupPassword" placeholder="Enter password" required>
      </div>
      <button onclick="signup()">Sign Up</button>
      <p class="error" id="signupError" style="display: none;">Email already exists or invalid input</p>
      <p class="toggle" onclick="showLogin()">Already have an account? <span>Log in</span></p>
    </div>
  </div>

  <!-- Dashboard Container (hidden initially) -->
  <div id="dashboardContainer" class="container" style="display: none;">
    <!-- Main Dashboard View -->
    <div class="dashboard">
      <h2>Welcome to Your Dashboard</h2>
      <button onclick="showEmailForm()">Send Email</button>
      
      <!-- Blockchain Health Dashboard -->
      <div id="blockchainDashboard">
        <h3>Blockchain Health</h3>
        <div class="health-metrics">
          <div class="metric">
            <span class="metric-value" id="chain-length">0</span>
            <span class="metric-label">Blocks</span>
          </div>
          <div class="metric">
            <span class="metric-value" id="pending-emails">0</span>
            <span class="metric-label">Pending</span>
          </div>
          <div class="metric">
            <span class="metric-value" id="chain-status">âœ“</span>
            <span class="metric-label">Status</span>
          </div>
        </div>
      </div>
      
      <button id="viewChainBtn" onclick="viewChain()">View Blockchain</button>
      <div id="chain-display"></div>
    </div>

    <!-- Email Form View -->
    <div id="emailForm" style="display: none;">
      <h2>Send Email</h2>
      <div class="form-group">
        <label for="recipient">Recipient Email</label>
        <input type="email" id="recipient" placeholder="Enter recipient email" required>
      </div>
      <div class="form-group">
        <label for="subject">Subject</label>
        <input type="text" id="subject" placeholder="Enter subject" required>
      </div>
      <div class="form-group">
        <label for="message">Message</label>
        <textarea id="message" rows="5" placeholder="Enter your message" required></textarea>
      </div>
      <button onclick="sendEmail()">Send Email</button>
      <button onclick="backToDashboard()">Back to Dashboard</button>
      <p class="error" id="emailError" style="display: none;">Please fill all fields correctly</p>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>